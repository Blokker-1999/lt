<section><title>selinux modes</title>
	<para><command>selinux</command> knows three modes: enforcing, permissive and disabled. The <command>enforcing</command> mode will enforce policies, and may deny access based on <command>selinux rules</command>. The <command>permissive</command> mode will not enforce policies, but can still log actions that would have been denied in <command>enforcing</command> mode. The <command>disabled</command> mode disables <command>selinux</command>.</para>
	<screen>
	</screen>
</section>
<section><title>activating selinux</title>
	<para>On RHEL you can use the GUI tool to activate <command>selinux</command>, on Debian there is the <command>selinux-activate<command> command.Activation requires a reboot.</para>
	<screen>
root@deb503:~# selinux-activate 
Activating SE Linux
Searching for GRUB installation directory ... found: /boot/grub
Searching for default file ... found: /boot/grub/default
Testing for an existing GRUB menu.lst file ... found: /boot/grub/menu.lst
Searching for splash image ... none found, skipping ...
Found kernel: /boot/vmlinuz-2.6.26-2-686
Updating /boot/grub/menu.lst ... done

SE Linux is activated.  You may need to reboot now.
	</screen>
</section>
<section><title>getenforce</title>
	<para>Use <command>getenforce</command> to verify whether selinux is <command>enforced</command>, <command>disabled</command> or <command>permissive</command>.</para>
	<screen>
[root@rhel55 ~]# getenforce 
Permissive
	</screen>
</section>
<section><title>setenforce</title>
	<para>You can use <command>setenforce</command> to switch between the <command>Permissive</command> or the <command>Enforcing</command> state once <command>selinux</command> is activated..</para>
	<screen>
[root@rhel55 ~]# setenforce Enforcing
[root@rhel55 ~]# getenforce 
Enforcing
[root@rhel55 ~]# setenforce Permissive
[root@rhel55 ~]# getenforce 
Permissive
	</screen>
</section>
<section><title>sestatus</title>
	<para>You can see the current <command>selinux</command> status and policy with the <command>sestatus</command> command.</para>
	<screen>
[root@rhel55 ~]# sestatus 
SELinux status:                 enabled
SELinuxfs mount:                /selinux
Current mode:                   permissive
Mode from config file:          permissive
Policy version:                 21
Policy from config file:        targeted
	</screen>
</section>
<section><title>logging</title>
	<para>Verify that <command>syslog</command> is running and activated on boot to enable logging of deny messages in <command>/var/log/messages</command>.</para>
	<screen>
[root@rhel55 ~]# chkconfig --list syslog
syslog         	0:off	1:off	2:on	3:on	4:on	5:on	6:off
	</screen>
	<para>Verify that <command>auditd</command> is running and activated on boot to enable logging of easier to read messages in <command>/var/log/audit/audit.log</command>.</para>
	<screen>
[root@rhel55 ~]# chkconfig --list auditd
auditd         	0:off	1:off	2:on	3:on	4:on	5:on	6:off
	</screen>
	<para>If not activated, then run <command>chkconfig --levels 2345 auditd on</command> and <command>service auditd start</command>.</para>
	<screen>
[root@rhel55 ~]# service auditd status
auditd (pid  1660) is running...
[root@rhel55 ~]# service syslog status
syslogd (pid  1688) is running...
klogd (pid  1691) is running...
	</screen>
	<para>The <command>/var/log/messages</command> log file will tell you that <command>selinux</command> is disabled.</para>
	<screen>
root@deb503:~# grep -i selinux /var/log/messages
Jun 25 15:59:34 deb503 kernel: [    0.084083] SELinux:  Disabled at boot.
	</screen>
	<para>Or that it is enabled.</para>
	<screen>
root@deb503:~# grep SELinux /var/log/messages | grep -i Init
Jun 25 15:09:52 deb503 kernel: [    0.084094] SELinux:  Initializing.
	</screen>
</section>
<section><title>/etc/selinux/config</title>
	<para>The main configuration file for <command>selinux</command> is <command>/etc/selinux/config</command>. When in <command>permissive</command> mode, the file looks like this.</para>
	<screen>
[root@rhel55 ~]# more /etc/selinux/config
# This file controls the state of SELinux on the system.
# SELINUX= can take one of these three values:
#       enforcing - SELinux security policy is enforced.
#       permissive - SELinux prints warnings instead of enforcing.
#       disabled - SELinux is fully disabled.
SELINUX=permissive
# SELINUXTYPE= type of policy in use. Possible values are:
#       targeted - Only targeted network daemons are protected.
#       strict - Full SELinux protection.
SELINUXTYPE=targeted
	</screen>
</section>
<section><title>DAC or MAC</title>
	<para>Standard Unix permissions use <command>Discretionary Access Control</command> to set permissions on files. This means that a user that owns a file, cn make it world readable by typing <command>chmod 777 $file</command>.</para>
	<para>With <command>selinux</command> the kernel will enforce <command>Mandatory Access Control</command> which strictly controls what processes or threads can do with files (superseding DAC). Processes are confined by the kernel to the minimum access they require.</para>
</section>
<section><title>ls -Z</title>
	<para>To see the DAC permissions on a file, use <command>ls -l</command> to display user and group <command>owner</command> and permissions (here <command>rw-r--r--</command>).</para>
	<screen>
root@deb503:~/selinux# touch test42.txt
root@deb503:~/selinux# ls -l
total 0
-rw-r--r-- 1 root root 0 2010-06-25 15:38 test42.txt
	</screen>
	<para>For MAC permissions there is new <command>-Z</command> option added to <command>ls</command>. The output shows an <command>selinux</command> user named <command>unconfined_u</command>, a role named <command>object_r</command>, a type named <command>unconfined_home_t</command>, and a level <command>S0</command>.</para>
	<screen>
root@deb503:~/selinux# ls -Z
unconfined_u:object_r:unconfined_home_t:s0 test42.txt
	</screen>
</section>
<section><title></title>
	<para></para>
	<screen>
	</screen>
</section>
<section><title></title>
	<para></para>
	<screen>
	</screen>
</section>
<section><title></title>
	<para></para>
	<screen>
	</screen>
</section>
<section><title></title>
	<para></para>
	<screen>
	</screen>
</section>
<section><title></title>
	<para></para>
	<screen>
	</screen>
</section>
<section><title></title>
	<para></para>
	<screen>
	</screen>
</section>
